# Решение тестового задания для UpTrader
Задача:

Нужно сделать django app, который будет реализовывать древовидное меню, соблюдая следующие условия:
1) Меню реализовано через template tag
2) Все, что над выделенным пунктом - развернуто. Первый уровень вложенности под выделенным пунктом тоже развернут.
3) Хранится в БД.
4) Редактируется в стандартной админке Django
5) Активный пункт меню определяется исходя из URL текущей страницы 
6) Меню на одной странице может быть несколько. Они определяются по названию.
7) При клике на меню происходит переход по заданному в нем URL. URL может быть задан как явным образом, так и через named url. 
8) На отрисовку каждого меню требуется ровно 1 запрос к БД
 Нужен django-app, который позволяет вносить в БД меню (одно или несколько) через админку, и нарисовать на любой нужной странице меню по названию.
 {% draw_menu 'main_menu' %}


### Установка и запуск:

1. Создайте папку для проекта;
2. Склонируйте проект с помощью `git clone`;
3. Создайте виртуальное окружение с помощью `venv`;
4. Активируйте виртуальное окружение;
5. Выполните команду `pip install -r requirements.txt` и дождитесь установки необходимых пакетов;
6. Перейдите в папку `tree_menu`;
7. С помощью Python выполните команду `manage.py makemigrations`;
8. Выполните команду `manage.py migrate` для применения миграций БД;
9. Запустите тестовый веб-сервер с помощью команды `manage.py runserver`;
10. Откройте браузер и перейдите по адресу **http://127.0.0.1:8000/**.

### Внесение данных в модель:
Для работы проекта необходимо внести тестовые данные через админ-панель.

Для этого необходимо:
1. Создать суперпользователя с помощью команды `manage.py createsuperuser`;
2. В админ-панели перейти в `Nodes`;
3. Добавить три элемента меню через `ADD NODE`
  - `first_menu`
  - `second_menu`
  - `third_menu`

Модель элемента (узла) меню имеет следующие поля:
1. `menu_name` - название меню, которому принадлежит элемент (заполняется автоматически при создании дочернего узла и должно быть внесено вручную для корневого узла);
2. `option` - надпись, отображаемая при рендеринге элемента меню в шаблоне (должна быть уникальной);
3. `parent` - поле, указывающее на родительский узел (для корневого узла меню не заполняется);
4. `slug` - slug-поле, заполняемое автоматически, исходя из `option` (не отображается в админ-панели);



### Добавление меню в шаблон:

1. Все шаблоны хранятся в папке `test_task_uptrader/templates/`;
2. Новое меню можно добавить, внеся в `{% block content %}` шаблона `index.html` тег `{% draw_menu 'MENU_NAME' %}`, 
где `MENU_NAME` - это название меню, указанное в одном из корневых узлов модели;


### Ограничения:
1. Корневой узел у меню должен быть только один, иначе будет ошибка при рендере;
2. Если какого-то меню нет в БД, а тег для него есть, будет ошибка при рендере;
3. У корневого узла поле `option` заполняется автоматически (заменяется на название, указанное в `menu_name`);

### Дополнительно:
1. Запросы к БД на получение данных о конкретном меню кэшируются;
2. Добавлять, удалять и изменять пункты меню можно, не перезагружая тестовый веб-сервер, так как при добавлении/сохранении/удалении пункта меню сбрасывается кэш;

### Использованные пакеты:

При решении тестового задания во время разработки использовались следующие пакеты, библиотеки и фреймворки:
1. Django;
2. Стандартная библиотека Python;
3. django-debug-toolbar - вспомогательный пакет для отслеживания работы django-приложений в процессе разработки (использовался для отслеживания обращений к БД и кэшу);
4. isort - утилита для оформления (сортировки) `import ...` (code formatter);
5. black - утилита для стилизации кода (code formatter).
